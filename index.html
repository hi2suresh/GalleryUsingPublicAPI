<!DOCTYPE HTML>
<html>

<head>
    <title>Interactive-Photo-Gallery</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
     <script src="https://cdn.jsdelivr.net/jquery/2.2.4/jquery.min.js"></script>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css?family=Merriweather" rel="stylesheet"> </head>

<body>
    <div id="container">
        <div id="omdb">
            <div><h1>My All Time Favorite Movies</h1></div>
            <div id="movie-gallery">
                <ul id="movie-list">
                
                </ul>
            </div>
            <div id="sort-div">
                <button id="sort-button">Sort Movies By Year</button>
            </div>
        </div>
        
         <div id="omdb">
            <div><h1>My All Time Favorite Movies</h1></div>
            <div id="movie-gallery">
                <ul id="movie-list">
                
                </ul>
            </div>
            <div id="sort-div">
                <button id="sort-button">Sort Movies By Year</button>
            </div>
        </div>
        <div>
      </div>
    </div>
    <script>
//     $(document).ready(function(){
         var moviesName = ['The Departed','Django Unchained', 'Shawshank Redemption', 'The Green Mile','Pulp Fiction','The Dark Knight'];
         var sortableMoviesByYear = [];
         var sortedMoviesByYear = [];
         var objMovies = {};
         for(let i=0; i<moviesName.length; i++){
         $.ajax({
                url : 'http://www.omdbapi.com/',
                type : 'GET',
                data : {
                    't' : moviesName[i]
                },
                dataType:'json',
                success : function(data) {                    
                    objMovies[moviesName[i]] = data;
                    //Store movie name and its year for sorting purpose
                    sortableMoviesByYear.push([moviesName[i],data.Year]);
                    createList(data);
                },
                error : function(request,error)
                {
                    alert("Request: "+JSON.stringify(request));
                }
         });
        }
     
        function createList(data){
            var $li = $('<li></li>');
            var $a = $('<a></a>');
            var $img = $('<img/>');

            $a.attr('href', data.Poster);
            $a.attr('Title', data.Title);            
            $img.attr('src',data.Poster);
            
            $a.append($img);
            $li.append($a);
            
            $('#movie-list').append($li);
        }
        
        $('#sort-button').click(function(){
            sortedMoviesByYear =  sortableMoviesByYear.sort(function(a,b){           
            return parseInt(a[1]) - parseInt(b[1]);
        });
            //Remove the previously created list items
            $("#movie-list").empty();
            for(let i=0; i<sortedMoviesByYear.length; i++){
                createList(objMovies[sortedMoviesByYear[i][0]]);
            }
        });           
        
        
        $.ajax({
                url : 'https://openlibrary.org/api/books',
                type : 'GET',
                data : {
                    'bibkeys' : "ISBN:9780980200447"
                },
                dataType:'jsonp',
                success : function(data) {                    
                   console.log(data);
                },
                error : function(request,error)
                {
                    alert("Request: "+JSON.stringify(request));
                }
         });
//     });
    
    </script>
</body>